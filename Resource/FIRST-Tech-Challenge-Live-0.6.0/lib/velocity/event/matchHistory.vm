## Copyright (c) 2018 FIRST, Thomas Barnette, George Marchant, and Trey Woodlief. All rights reserved.
##
## Redistribution and use in source and binary forms, with or without modification,
## are permitted (subject to the limitations in the disclaimer below) provided that
## the following conditions are met:
##
## Redistributions of source code must retain the above copyright notice, this list
## of conditions and the following disclaimer.
##
## Redistributions in binary form must reproduce the above copyright notice, this
## list of conditions and the following disclaimer in the documentation and/or
## other materials provided with the distribution.
##
## Neither the name of FIRST nor the names of its contributors may be used to endorse or
## promote products derived from this software without specific prior written permission.
##
## NO EXPRESS OR IMPLIED LICENSES TO ANY PARTY'S PATENT RIGHTS ARE GRANTED BY THIS
## LICENSE. THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
## "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
## THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
## ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE
## FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
## DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
## SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
## CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
## OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
## OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
##

#parse("/velocity/layout.vm")
#@mainLayout()
<style>
th {
	text-align:center;
}
td {
	text-align:center;
}
</style>
<div class="row">
	<div class="col-12">
		<a href="../../../results/"><< Back to Match Results</a>
	</div>
</div>
<div class="row">
	<div class="col-lg-8 offset-lg-2 h2 text-center">
		$eventCode
	</div>
</div>
<div class="row">
	<div class="col-lg-8 offset-lg-2 h2 text-center">
		History for $m.getShortName()
	</div>
</div>
<br>
<div class="row">
	<div class="col-lg-8 offset-lg-2 h5 text-center">
		Most Recent First
	</div>
</div>
<table class="table table-striped">
  <thead>
    <tr>
      <th scope="col">Record #</th>
      <th scope="col">Type</th>
      <th scope="col">Time</th>
      <th scope="col">Winner</th>
      <th scope="col">Red Score</th>
      <th scope="col">Blue Score</th>
      <th scope="col">Scoresheet</th>
    </tr>
  </thead>
  <tbody>
  #set ($redColor = "#FF4444")
  #set ($blueColor = "#44AAFF")
	#set($max = $m.getCommits().size() - 1)
	#foreach($i in [ $max ..  0 ])
  	#set($commit = $m.getCommits()[$i])
 	## #if($commit.getType().ordinal() == 0)
	  	<tr>
	  			#if($commit.getMatch().getRed().equals($commit.getMatch().getWinner()))
					#set ($winColor = "$redColor")
					#set ($winChar = "Red")
				#elseif($commit.getMatch().getBlue().equals($commit.getMatch().getWinner()))
					#set ($winColor = "$blueColor")
					#set ($winChar = "Blue")
				#else
					#set ($winColor = "#CCCCCC")
					#set ($winChar = "Tie")
				#end
			#set($record = $i + 1)
	  		<td>$record</td>
	  		<td>#if($commit.getType() == "COMMIT")<b>#{end}$commit.getType().getDisplayString()#if($commit.getType() == "COMMIT")</b>#{end}</td>
	  		<td>$commit.getFormattedTime()</td>
	  		<td bgcolor="$winColor">$winChar</td>
	  		<td>$commit.getMatch().getRedTotal()</td>
	  		<td>$commit.getMatch().getBlueTotal()</td>
	  		<td><a href="./$i/">Scoresheet</a></td>
	  	</tr>
  	###end
  #end
  </tbody>
 </table>

#end