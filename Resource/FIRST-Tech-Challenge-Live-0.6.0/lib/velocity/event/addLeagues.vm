## Copyright (c) 2018 FIRST, Thomas Barnette, George Marchant, and Trey Woodlief. All rights reserved.
##
## Redistribution and use in source and binary forms, with or without modification,
## are permitted (subject to the limitations in the disclaimer below) provided that
## the following conditions are met:
##
## Redistributions of source code must retain the above copyright notice, this list
## of conditions and the following disclaimer.
##
## Redistributions in binary form must reproduce the above copyright notice, this
## list of conditions and the following disclaimer in the documentation and/or
## other materials provided with the distribution.
##
## Neither the name of FIRST nor the names of its contributors may be used to endorse or
## promote products derived from this software without specific prior written permission.
##
## NO EXPRESS OR IMPLIED LICENSES TO ANY PARTY'S PATENT RIGHTS ARE GRANTED BY THIS
## LICENSE. THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
## "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
## THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
## ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE
## FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
## DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
## SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
## CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
## OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
## OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
##

#parse("/velocity/layout.vm")
#@mainLayout()

	<style>
	.uploadForm {
		display:inline;
		float:right;
		padding-left:10px;
	}
	</style>
	<script>
		function exportLeagues(){
			window.open("./exportleague/");
		}
	</script>

	<div class="row justify-content-center">
		<a href=".." class="col-3"><< Back to Dashboard</a> 
		<div class="col-2"><button title="This exports leagues & previous match data only. This event's match info is not included." onclick="exportLeagues()">Export Leagues</button></div>
		 <div class="col-7">
		<form method='post' enctype='multipart/form-data' action="./import/" class="uploadForm">
    			<input type='file' accept=".db" name='uploaded_file' onchange="document.getElementById('importLeagueDataButton').disabled = (this.value.length == 0)"></input>
    			<button id="importLeagueDataButton" disabled>Import League Data</button>
			</form>
		</div>
	</div>
	<hr>
	<div class="row justify-content-center">
		<div class="col-3"></div><div class="col-6 h2 text-center">Leagues:</div> <div class="col-3"></div>
	</div>
<div class="row justify-content-center">
 <table id="leagues" class="table table-striped table-hover" style ="word-break:break-word;">
    	    <thead>
    			<tr class="d-flex">
    				<th scope="col" class="col-2">Code</th>
    				<th scope="col" class="col-3">Name</th>
    				<th scope="col" class="col-2">City</th>
    				<th scope="col" class="col-2">State/<wbr>Province</th>
    				<th scope="col" class="col-1">Country</th>
    				<th scope="col" class="col-1">#&nbsp;Teams</th>
    				<th scope="col" class="col-1"><a href="add/" class="btn btn-secondary">Add</a></th>
    			</tr>
    			</thead>
    			<tbody>
    			#foreach ($league in $leagues)
    			<tr class="d-flex">
					<td scope="col" class="col-2">$league.getCode()</td>
    				<td scope="col" class="col-3">$league.getName()</td>
    				<td scope="col" class="col-2">$league.getCity()</td>
    				<td scope="col" class="col-2">$league.getState()</td>
    				<td scope="col" class="col-1">$league.getCountry()</td>
    				<td scope="col" class="col-1">$leagueMembers.get($league.getCode()).size()</td>
    				<th scope="col" class="col-1"><a href="edit/$league.getCode()/" class="btn btn-secondary">Edit</a></th>
    			</tr>
    			#end
				</tbody>
    		</table>
</div>

<hr>
	<div class="row justify-content-center">
		<div class="col-3"></div><div class="col-6 h2 text-center">Meets:</div> <div class="col-3"></div>
	</div>
<div class="row justify-content-center">
 <table id="leagues" class="table table-striped table-hover" style ="word-break:break-word;">
    	    <thead>
    			<tr>
    				<th>Code</th>
    				<th>Name</th>
    				<th>Start Date - End Date</th>
    			</tr>
    			</thead>
    			<tbody>
    			#foreach ($meet in $meets)
    			<tr>
					<td>$meet.code</td>
    				<td>$meet.name</td>
    				<td>$meet.getStartEndString()</td>
    			</tr>
    			#end
				</tbody>
    		</table>
</div>

		<div class="row justify-content-center">
			Note: The current event does not appear in the list of league meets. <br>It will still be included in rankings calculations and will be added to the exported file at the conclusion of the event.
		</div>
	
#end